<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>ASTRA Alliance</title>
    <style>
      html, body, #map {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="js/tabletop1.3.4.js"></script>
    <script src="js/highlight.js"></script>
    <script src="js/sheetsee.js"></script>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">
      var map;
      
      function requestData() {
        var KEY = 
        Tabletop.init({
          key: "1nGRNFKDKLpkSfeznS83I8E_iXiUqoWSsvT-pSW2LcC8",
          callback: displayData,
          simpleSheet: true
        })
      }
      
      function displayData(data) {
        console.log(data);
        $.each(data, function(i, value) {
          console.log(value.Name);
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(value["position-lat"],value["position-long"]),
            map: map,
            title: value.name,
            animation:google.maps.Animation.DROP
          });
        });
      }
      
      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          center: {lat: 51.676531, lng: -0.609992}, zoom: 11
        });
        requestData();
      }
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwO34xqNaBKqSDIjQj4-okudSlRwCkpkg&callback=initMap">
    </script>
  </body>
</html>
